<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Namma Nattu Podi</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #f5ebe0;
      padding: 20px;
      color: #5c3a21;
      margin: 0;
    }
    .slogan-bar {
      background: linear-gradient(90deg, #ff7e5f, #feb47b);
      color: white;
      font-weight: bold;
      font-family: 'Georgia', serif;
      font-size: 1.2rem;
      text-align: center;
      padding: 12px 20px;
      border-radius: 0 0 15px 15px;
      box-shadow: 0 5px 15px rgba(255, 126, 95, 0.5);
      margin-bottom: 20px;
      display: flex;
      justify-content: center;
      align-items: center;
      gap: 10px;
    }
    .slogan-bar .emoji {
      font-size: 1.5rem;
    }
    .container {
      max-width: 900px;
      margin: auto;
      background: #fff3e6;
      border-radius: 15px;
      padding: 30px;
      box-shadow: 0 4px 10px rgba(92, 58, 33, 0.2);
    }
    .header {
      display: flex;
      align-items: center;
      margin-bottom: 30px;
    }
    .header img {
      width: 60px;
      height: 60px;
      border-radius: 50%;
      margin-right: 15px;
      object-fit: cover;
      box-shadow: 0 2px 6px rgba(160, 82, 45, 0.4);
    }
    h1 {
      color: #a0522d;
      font-family: 'Georgia', serif;
      font-weight: bold;
      margin: 0;
    }
    h2 {
      margin-top: 0;
      color: #7f4b1e;
      font-family: 'Georgia', serif;
      font-weight: bold;
    }
    label {
      font-family: 'Georgia', serif;
      font-weight: bold;
      color: #7f4b1e;
      margin-top: 10px;
      display: block;
    }
    select, input {
      padding: 10px;
      margin-top: 10px;
      width: 100%;
      box-sizing: border-box;
      border: 2px solid #a0522d;
      border-radius: 8px;
      font-size: 15px;
      background: #fff8f0;
      color: #5c3a21;
      font-family: 'Georgia', serif;
    }
    .product-group label,
    .product-group select,
    .product-group input {
      font-size: 15px;
    }
    button {
      padding: 12px;
      background: #a0522d;
      color: white;
      border: none;
      width: 100%;
      border-radius: 8px;
      cursor: pointer;
      margin-top: 20px;
      font-weight: bold;
      font-size: 16px;
      font-family: 'Georgia', serif;
      transition: background 0.3s ease;
    }
    button:hover {
      background: #7f3d13;
    }
    .note {
      color: #a0522d;
      text-align: center;
      margin-top: 20px;
      font-weight: bold;
      font-family: 'Georgia', serif;
    }
    .note.small {
      font-weight: normal;
      font-size: 14px;
      margin-top: 5px;
    }
    .product-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 20px;
    }
    .product-group {
      border: 1px solid #a0522d;
      border-radius: 10px;
      padding: 15px;
      background: #fffdf8;
    }
    #totals {
      margin-top: 20px;
      font-family: 'Georgia', serif;
      font-weight: bold;
      text-align: right;
      line-height: 1.6;
    }
    #totalQuantityLabel {
      color: #4a7c59;
    }
    #totalPriceLabel {
      color: #4a7c59;
    }

    @media (max-width: 600px) {
      body {
        padding: 10px;
        font-size: 14px;
      }
      .slogan-bar {
        font-size: 1rem;
        padding: 10px;
        border-radius: 0 0 10px 10px;
      }
      .container {
        padding: 20px;
        border-radius: 10px;
      }
      .header {
        flex-direction: column;
        align-items: flex-start;
        gap: 10px;
        margin-bottom: 20px;
      }
      .header img {
        width: 50px;
        height: 50px;
        margin-right: 0;
      }
      h1 {
        font-size: 1.8rem;
      }
      h2 {
        font-size: 1.3rem;
      }
      label {
        font-size: 14px;
      }
      select, input, button {
        font-size: 16px;
      }
      .product-grid {
        grid-template-columns: 1fr;
        gap: 15px;
      }
      #totals {
        text-align: left;
        font-size: 14px;
      }
      button {
        padding: 14px;
      }
      .note {
        font-size: 14px;
      }
      .note.small {
        font-size: 12px;
      }
    }
  </style>
</head>
<body>
  <div class="slogan-bar">
    <span class="emoji">ðŸŒ¿</span>
    Spice Up Life, The Natural Way â€” <strong>100% Homemade Masala Powder</strong>
  </div>

  <div class="container">
    <div class="header">
      <img src="granny-cook.png" alt="Granny Cooking" />
      <h1>Namma Nattu Podi</h1>
    </div>

    <div class="product">
      <label for="customerName">Enter your name:</label>
      <input type="text" id="customerName" placeholder="Name" required />

      <label for="pincode">Enter delivery pincode:</label>
      <input type="text" id="pincode" placeholder="Eg: 600001" required />

      <br /><br />

      <h2>Select Products & Quantities</h2>

      <div id="productInputs" class="product-grid"></div>

      <div id="totals">
        <span id="totalQuantityLabel">Total Quantity:</span> <span id="totalQuantity">0g</span><br /><br />
        <span id="totalPriceLabel">Total Price:</span> <span id="totalPrice">â‚¹0</span>
      </div>

      <button onclick="placeOrder()">Order via WhatsApp</button>
    </div>

    <p class="note">Minimum Order: 500g across all products</p>
    <p class="note small">Note: Courier charges excluded</p>
  </div>

  <script>
    const productQuantities = {
      sambar_powder: [
        { value: 250, label: "250g - â‚¹150", price: 150 },
        { value: 500, label: "500g - â‚¹300", price: 300 },
        { value: 1000, label: "1kg - â‚¹600", price: 600 },
      ],
      rasam_powder: [
        { value: 250, label: "250g - â‚¹185", price: 185 },
        { value: 500, label: "500g - â‚¹370", price: 370 },
        { value: 1000, label: "1kg - â‚¹740", price: 740 },
      ],
      curry_powder: [
        { value: 250, label: "250g - â‚¹200", price: 200 },
        { value: 500, label: "500g - â‚¹400", price: 400 },
        { value: 1000, label: "1kg - â‚¹800", price: 800 },
      ],
    };

    const productNameMap = {
      sambar_powder: "Sambar Powder",
      rasam_powder: "Rasam Powder",
      curry_powder: "Curry Powder (Meat Masala)",
    };

    function createProductInputs() {
      const container = document.getElementById("productInputs");
      container.innerHTML = "";

      Object.keys(productQuantities).forEach((productKey) => {
        const group = document.createElement("div");
        group.className = "product-group";

        const label = document.createElement("label");
        label.textContent = productNameMap[productKey];

        const quantitySelect = document.createElement("select");
        quantitySelect.id = `${productKey}_quantity`;
        quantitySelect.onchange = updateTotals;
        productQuantities[productKey].forEach((qty) => {
          const option = document.createElement("option");
          option.value = qty.value;
          option.textContent = qty.label;
          quantitySelect.appendChild(option);
        });

        const packLabel = document.createElement("label");
        packLabel.textContent = "How many packs?";

        const packInput = document.createElement("input");
        packInput.type = "number";
        packInput.id = `${productKey}_packs`;
        packInput.min = 0;
        packInput.value = 0;
        packInput.oninput = updateTotals;

        group.appendChild(label);
        group.appendChild(quantitySelect);
        group.appendChild(packLabel);
        group.appendChild(packInput);

        container.appendChild(group);
      });

      updateTotals();
    }

    function placeOrder() {
      const nameInput = document.getElementById("customerName").value.trim();
      const pincode = document.getElementById("pincode").value.trim();

      if (!nameInput) {
        alert("Please enter your name");
        return;
      }

      if (!/^\d{6}$/.test(pincode)) {
        alert("Please enter a valid 6-digit delivery pincode");
        return;
      }

      let message = `Hi! I am ${nameInput}.\nI would like to place an order:\n`;
      let totalGrams = 0;
      let totalPrice = 0;
      let atLeastOneProduct = false;

      Object.keys(productQuantities).forEach((productKey) => {
        const packs = parseInt(document.getElementById(`${productKey}_packs`).value);
        const quantity = parseInt(document.getElementById(`${productKey}_quantity`).value);

        if (packs > 0 && quantity > 0) {
          const productLabel = productNameMap[productKey];
          const selectedQuantity = productQuantities[productKey].find(
            (q) => q.value === quantity
          );
          const subtotal = selectedQuantity.price * packs;
          totalPrice += subtotal;
          const grams = packs * quantity;
          totalGrams += grams;
          atLeastOneProduct = true;

          message += `\n${packs} pack(s) of ${productLabel} (${quantity}g each) - â‚¹${subtotal}`;
        }
      });

      if (!atLeastOneProduct) {
        alert("Please select at least one product with a valid pack count");
        return;
      }

      if (totalGrams < 500) {
        alert("Minimum order quantity is 500g across all products. Please increase the quantity.");
        return;
      }

      const qtyText = totalGrams >= 1000
        ? (totalGrams / 1000) + "kg"
        : totalGrams + "g";

      message += `\n\nTotal Quantity: ${qtyText}\nTotal Price: â‚¹${totalPrice}\nDelivery Pincode: ${pincode}\nThank you!`;
      const whatsappUrl = `https://wa.me/916383134699?text=${encodeURIComponent(message)}`;
      window.open(whatsappUrl, "_blank");
    }

    window.onload = createProductInputs;

    function updateTotals() {
      let totalGrams = 0;
      let totalPrice = 0;

      Object.keys(productQuantities).forEach((productKey) => {
        const packs = parseInt(document.getElementById(`${productKey}_packs`).value) || 0;
        const quantity = parseInt(document.getElementById(`${productKey}_quantity`).value) || 0;

        if (packs > 0 && quantity > 0) {
          const selectedQuantity = productQuantities[productKey].find(
            (q) => q.value === quantity
          );
          const subtotal = selectedQuantity.price * packs;
          const grams = packs * quantity;

          totalGrams += grams;
          totalPrice += subtotal;
        }
      });

      document.getElementById("totalQuantity").textContent =
        totalGrams >= 1000 ? (totalGrams / 1000) + "kg" : totalGrams + "g";
      document.getElementById("totalPrice").textContent = `â‚¹${totalPrice}`;
    }
  </script>
</body>
</html>
